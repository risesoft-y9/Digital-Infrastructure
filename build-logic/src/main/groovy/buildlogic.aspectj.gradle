plugins {
    id "io.freefair.aspectj.post-compile-weaving"
}

println "apply plugin 'io.freefair.aspectj.post-compile-weaving' for ${project.name}"

dependencies {
    api libs.org.aspectj.aspectjrt
    api libs.org.aspectj.aspectjtools
    
    aspect libs.org.springframework.spring.aspects
    testAspect libs.org.springframework.spring.aspects
}

compileJava {
    ajc {
        enabled = true
        classpath
        options {
            aspectpath.setFrom configurations.aspect
            compilerArgs = []
            compilerArgs += "-showWeaveInfo -verbose"
        }
    }
}

compileTestJava {
    ajc {
        enabled = true
        classpath
        options {
            aspectpath.setFrom configurations.testAspect
            compilerArgs = []
        }
    }
}
