plugins {
    id("buildlogic.y9-repository")
    id("io.freefair.aspectj.post-compile-weaving")
}

dependencies {
    implementation(libs.org.aspectj.aspectjrt)
    implementation(libs.org.aspectj.aspectjtools)

    aspect(libs.org.springframework.spring.aspects)
    testAspect(libs.org.springframework.spring.aspects)
}

tasks.compileJava {
    configure<AjcAction> {
        enabled = true
        classpath
        options {
            aspectpath.setFrom(configurations.aspect)
            compilerArgs = listOf("")
        }
    }
}

tasks.compileTestJava {
    configure<AjcAction> {
        enabled = true
        classpath
        options {
            aspectpath.setFrom(configurations.testAspect)
            compilerArgs = listOf("")
        }
    }
}