<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.9.xsd">

    <changeSet id="1701225906276-1" author="shidaobang">
        <addNotNullConstraint columnDataType="VARCHAR(255)" columnName="MEMBER_TYPE"
                              tableName="Y9_ORG_CUSTOM_GROUP_MEMBER" validate="true"/>
    </changeSet>
    <changeSet id="1701225906276-2" author="shidaobang">
        <addNotNullConstraint columnDataType="VARCHAR(255)" columnName="ORG_TYPE" tableName="Y9_ORG_ORGBASES_ROLES"
                              validate="true"/>
    </changeSet>
    <changeSet id="1701225906276-3" author="shidaobang">
        <addNotNullConstraint columnDataType="INT" columnName="RESOURCE_TYPE" tableName="Y9_ORG_AUTHORIZATION"
                              validate="true"/>
    </changeSet>

    <changeSet id="1702001405827-1" author="shidaobang">
        <dropColumn columnName="DUTY" tableName="Y9_ORG_POSITION"/>

        <dropColumn columnName="DUTY_LEVEL" tableName="Y9_ORG_POSITION"/>

        <dropColumn columnName="DUTY_LEVEL_NAME" tableName="Y9_ORG_POSITION"/>

        <dropColumn columnName="DUTY_TYPE" tableName="Y9_ORG_POSITION"/>

        <addColumn tableName="Y9_ORG_POSITION">
            <column name="JOB_NAME" remarks="职位名称" type="VARCHAR(255 BYTE)">
                <constraints nullable="false"/>
            </column>
        </addColumn>

        <sql>
            UPDATE Y9_ORG_POSITION
            SET JOB_NAME = (SELECT NAME
                            FROM Y9_ORG_JOB
                            WHERE Y9_ORG_JOB.ID = Y9_ORG_POSITION.JOB_ID);
        </sql>
    </changeSet>

    <changeSet id="1702520031601-1" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="varchar(38)"
                tableName="Y9_ORG_ORGBASES_ROLES"/>
    </changeSet>
    <changeSet id="1702520031601-2" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_PERSONS_GROUPS"/>
    </changeSet>
    <changeSet id="1702520031601-3" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_PERSONS_POSITIONS"/>
    </changeSet>
    <changeSet id="1702520031601-4" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_POSITIONS_GROUPS"/>
    </changeSet>
    <changeSet id="1702520031601-5" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_PERSONS_RESOURCES"/>
    </changeSet>
    <changeSet id="1702520031601-6" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_PERSONS_ROLES"/>
    </changeSet>
    <changeSet id="1702520031601-7" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_POSITIONS_RESOURCES"/>
    </changeSet>
    <changeSet id="1702520031601-8" author="shidaobang">
        <modifyDataType
                columnName="ID"
                newDataType="VARCHAR(38)"
                tableName="Y9_ORG_POSITIONS_ROLES"/>
    </changeSet>
</databaseChangeLog>